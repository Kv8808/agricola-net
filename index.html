<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>AGRICOLA NET – VENTA DE PRODUCTOS AGRICOLAS</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" href="LOGO.png" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
<style>
/* tu CSS resumido (mantén tu estilo original si quieres) */
body{margin:0;font-family:'Montserrat',Arial,sans-serif;background:radial-gradient(circle,#2e7d32,#1b5e20);color:white;}
header{padding:30px;background:rgba(0,0,0,0.5);text-align:center}
.menu{background:rgba(0,0,0,0.7);padding:12px 0;text-align:center}
.menu a{color:white;text-decoration:none;margin:0 25px;font-weight:600;letter-spacing:1px;cursor:pointer}
footer{background:rgba(0,0,0,0.6);padding:25px;margin-top:60px;text-align:center}
</style>
</head>
<body>

<script type="module">
  import { supabase } from './js/supabaseClient.js'

  (async () => {
    const { data: { session } } = await supabase.auth.getSession()
    if (!session) {
      window.location.href = 'login.html'
      return
    }

    // opcional: mostrar info de usuario en consola
    const { data: { user }, error } = await supabase.auth.getUser()
    if (error) console.warn('getUser warning', error)
    console.log('Usuario activo:', user?.email, 'role(app_metadata):', user?.app_metadata?.role)
  })()
</script>

<header>
    <img src="LOGO.png" alt="logo" style="width:120px">
    <h1>AGRÍCOLA NET</h1>
    <p>Distribución y venta de productos agrícolas</p>
</header>

<nav class="menu">
    <a onclick="scrollLento('inicio')">Inicio</a>
    <a onclick="scrollLento('productos')">Productos</a>
    <a href="registrar_atencion.html">Registrar Atención</a>
    <a href="ver_atenciones.html">Ver Atenciones</a>
    <a id="logoutBtn" style="float:right;margin-right:20px;cursor:pointer;">Cerrar sesión</a>
</nav>

<section id="inicio" style="padding:60px;text-align:center">
  <h2>BIENVENIDOS A AGRÍCOLA NET</h2>
  <p style="max-width:900px;margin:18px auto;line-height:1.8">EN AGRÍCOLA NET SE ESPECIALIZA EN LA COMERCIALIZACIÓN DE PRODUCTOS AGRÍCOLAS...</p>
</section>

<section id="productos" style="padding:40px">
  <h2 style="text-align:center">NUESTROS PRODUCTOS</h2>
  <div id="productos-container" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:18px;max-width:1100px;margin:18px auto"></div>
</section>

<footer>
  <p>© 2026 AGRÍCOLA NET – Todos los derechos reservados</p>
</footer>

<script>
const lista = [
  ["Maíz","maiz.png","maiz.pdf"],["Frijol","frijol.png","maiz.pdf"],["Arroz","arroz.png","maiz.pdf"],
  ["Trigo","trigo.png","maiz.pdf"],["Cebada","cebada.png","maiz.pdf"],["Avena","avena.png","maiz.pdf"],
  ["Sorgo","sorgo.png","maiz.pdf"],["Alfalfa","alfalfa.png","maiz.pdf"],["Garbanzo","garbanzo.png","maiz.pdf"],
  ["Lenteja","lenteja.png","maiz.pdf"],["Chía","chia.png","maiz.pdf"],["Ajonjolí","ajonjoli.png","maiz.pdf"],
  ["Semilla de Girasol","girasol.png","maiz.pdf"],["Harina de Maíz","harina.png","maiz.pdf"],["Forraje","forraje.png","maiz.pdf"]
];

const container = document.getElementById('productos-container')
if (container) {
  container.innerHTML = lista.map((p,i)=>`
    <div style="background:rgba(255,255,255,0.08);padding:12px;border-radius:8px;text-align:center">
      <img src="${p[1]}" alt="${p[0]}" style="width:100%;height:90px;object-fit:contain;background:#2e7d32;border-radius:6px">
      <h4>${p[0]}</h4>
      <div style="margin-top:8px">
        <a class="boton" href="https://wa.me/521XXXXXXXXXX" style="display:inline-block;margin:4px;padding:8px 10px;background:#4caf50;color:white;border-radius:6px;text-decoration:none">Comprar</a>
        <a class="boton" href="${p[2]}" target="_blank" style="display:inline-block;margin:4px;padding:8px 10px;background:#4caf50;color:white;border-radius:6px;text-decoration:none">Ficha</a>
      </div>
    </div>
  `).join('')
}

function scrollLento(id){
  const destino=document.getElementById(id)
  if(!destino) return
  const inicio=window.scrollY
  const fin=destino.getBoundingClientRect().top + inicio
  const duracion=800
  let start=null
  function animar(t){
    if(!start) start=t
    const progreso=(t-start)/duracion
    const avance=Math.min(progreso,1)
    window.scrollTo(0, inicio + (fin-inicio)*avance)
    if(avance<1) requestAnimationFrame(animar)
  }
  requestAnimationFrame(animar)
}
</script>

<script type="module">
  import { supabase } from './js/supabaseClient.js'
  const btn = document.getElementById('logoutBtn')
  if (btn) {
    btn.addEventListener('click', async () => {
      try {
        await supabase.auth.signOut()
      } catch (err) {
        console.error('Logout error', err)
      } finally {
        window.location.href = 'login.html'
      }
    })
  } else {
    console.warn('logoutBtn no encontrado')
  }
</script>

</body>
</html>
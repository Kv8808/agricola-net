<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>AGRICOLA NET – VENTA DE PRODUCTOS AGRICOLAS</title>
<link rel="icon" href="LOGO.png" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
<style>
/* (tu CSS existente — lo mantenemos) */
body{margin:0;font-family:'Montserrat',Arial,sans-serif;background:radial-gradient(circle,#2e7d32,#1b5e20);color:white;}
/* ... resto de tu CSS ... */
</style>
</head>
<body>

<!-- Protegemos la página: si no hay sesión redirige a login -->
<script type="module">
  import { supabase } from './js/supabaseClient.js'

  (async () => {
    const { data: { session } } = await supabase.auth.getSession()
    if (!session) {
      // no está logueado → redirigir al login
      window.location.href = 'login.html'
      return
    }
    // opcional: mostrar usuario en consola
    // const { data: { user } } = await supabase.auth.getUser()
    // console.log('Usuario activo:', user)
  })()
</script>

<header>
    <img src="LOGO.png" alt="logo">
    <h1>AGRÍCOLA NET</h1>
    <p>Distribución y venta de productos agrícolas</p>
</header>

<nav class="menu">
    <a onclick="scrollLento('inicio')">Inicio</a>
    <a onclick="scrollLento('productos')">Productos</a>
    <a href="registrar_atencion.html">Registrar Atención</a>
    <a href="ver_atenciones.html">Ver Atenciones</a>
    <a id="logoutBtn" style="float:right;margin-right:20px;cursor:pointer;">Cerrar sesión</a>
</nav>

<section id="inicio" class="inicio">
<!-- ... tu contenido existente ... -->
<h2 class="titulo-principal">BIENVENIDOS A AGRÍCOLA NET</h2>
<div class="texto-contenedor">
  <!-- ... textos ... -->
</div>
</section>

<section id="productos">
<h2>NUESTROS PRODUCTOS</h2>
<div class="productos">
<script>
const lista = [
["Maíz","maiz.png","maiz.pdf"],
["Frijol","frijol.png","maiz.pdf"],
["Arroz","arroz.png","maiz.pdf"],
["Trigo","trigo.png","maiz.pdf"],
["Cebada","cebada.png","maiz.pdf"],
["Avena","avena.png","maiz.pdf"],
["Sorgo","sorgo.png","maiz.pdf"],
["Alfalfa","alfalfa.png","maiz.pdf"],
["Garbanzo","garbanzo.png","maiz.pdf"],
["Lenteja","lenteja.png","maiz.pdf"],
["Chía","chia.png","maiz.pdf"],
["Ajonjolí","ajonjoli.png","maiz.pdf"],
["Semilla de Girasol","girasol.png","maiz.pdf"],
["Harina de Maíz","harina.png","maiz.pdf"],
["Forraje","forraje.png","maiz.pdf"]
];

document.write(
lista.map((p,i)=>`
<div class="producto">
    <img src="${p[1]}">
    <h4>${p[0]}</h4>
    <a class="boton" href="https://wa.me/521XXXXXXXXXX">Comprar</a>
    <a class="boton" href="${p[2]}" target="_blank">Ficha</a>
    <button class="boton" onclick="toggle('d${i}')">Descripción</button>
    <p id="d${i}" class="descripcion">
        ${p[0]} agrícola de alta calidad, seleccionado y disponible para
        consumo, siembra o uso industrial.
    </p>
</div>
`).join("")
);
</script>
</div>
</section>

<footer>
<p>© 2026 AGRÍCOLA NET – Todos los derechos reservados</p>
</footer>

<script>
function toggle(id){
    const d=document.getElementById(id);
    d.style.display = d.style.display === "block" ? "none" : "block";
}
function scrollLento(id){
    const destino=document.getElementById(id);
    const inicio=window.scrollY;
    const fin=destino.getBoundingClientRect().top + inicio;
    const duracion=1200;
    let start=null;
    function animar(t){
        if(!start) start=t;
        const progreso=t-start;
        const avance=Math.min(progreso/duracion,1);
        window.scrollTo(0, inicio + (fin-inicio)*avance);
        if(avance<1) requestAnimationFrame(animar);
    }
    requestAnimationFrame(animar);
}
</script>

<!-- Logout handler -->
<script type="module">
  import { supabase } from './js/supabaseClient.js'
  const btn = document.getElementById('logoutBtn')
  btn.addEventListener('click', async () => {
    await supabase.auth.signOut()
    // borra cookies y redirige
    window.location.href = 'login.html'
  })
</script>

</body>
</html>